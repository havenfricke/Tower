import{r as W,a as Y,b as G,u as S,c as w,d as k,o as _,e as m,f as o,g as E,w as C,F,h as J,i as y,v as x,j as Q,k as p,S as q,l as X,m as Z,t as g,n as b,p as ee,q as te,s as P,x as ne,y as L,z as j,A as M,B as oe}from"./vendor.7246176c.js";const ae=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}};ae();const c=W({user:{},account:{},tEvents:[],myEvents:[],myTickets:[],activeEvent:{},comments:[],eTickets:[]}),R=window.location.origin.includes("localhost"),V=R?"http://localhost:3000":"",se="dev-9nhmqst0.us.auth0.com",ce="5SHvCWqvJS5iH2ADhvN5zY1sSpC1Mgb1",re="https://haven-dev.com";function T(a,e){if(R)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const r={log(){T("log",arguments)},error(){T("error",arguments)},warn(){T("warn",arguments)},assert(){T("assert",arguments)},trace(){T("trace",arguments)}},d=Y.create({baseURL:V,timeout:8e3});class ie{async getAllEvents(e={}){const t=await d.get("/api/events",{params:e});r.log("get all events",t.data),c.tEvents=t.data}async getEventById(e){const t=await d.get("/api/events/"+e);r.log("get event by id",t.data),c.activeEvent=t.data}async getConcerts(e={}){const t=await d.get("/api/events",{params:e});r.log("get all events",t.data);let n="CONCERT";c.tEvents=t.data.filter(s=>s.type==n),r.log(c.tEvents)}async getConventions(e={}){const t=await d.get("/api/events",{params:e});r.log("get all events",t.data);let n="CONVENTION";c.tEvents=t.data.filter(s=>s.type==n),r.log(c.tEvents)}async getSports(e={}){const t=await d.get("/api/events",{params:e});r.log("get all events",t.data);let n="SPORT";c.tEvents=t.data.filter(s=>s.type==n),r.log(c.tEvents)}async getDigital(e={}){const t=await d.get("/api/events",{params:e});r.log("get all events",t.data);let n="DIGITAL";c.tEvents=t.data.filter(s=>s.type==n),r.log(c.tEvents)}async createEvent(e){r.log(e,"body made it to service");const t=await d.post("/api/events",e);return r.log("create event",t.data),c.tEvents=[...c.tEvents,t.data],c.activeEvent=t.data,t.data}async editEvent(e,t){const n=await d.put("/api/events/"+t,e);r.log("edited event",n.data),c.activeEvent=n.data}async cancelEvent(e){const t=await d.delete("/api/events/"+e);r.log(t.data),c.activeEvent=t.data}}const le=new ie;var f=(a,e)=>{for(const[t,n]of e)a[t]=n;return a};const de={name:"App",setup(){const a=G({}),e=S();return{editable:a,async createEvent(){try{const t=await le.createEvent(a.value);e.push({name:"Events",params:{id:t.id}})}catch(t){r.error(t)}},appState:w(()=>c)}}},ue=p(" Create an Event "),_e={class:"row"},me={class:"col-12"},ve=p(" Event Name "),ge=p(" Start Date "),he=p(" Capacity "),pe=p(" Description "),fe=p(" Location "),ye=p(" Event Cover Image Link "),be=p(" Event type "),ke=o("option",{value:"CONCERT"},"Concert",-1),Ee=o("option",{value:"CONVENTION"},"Convention",-1),xe=o("option",{value:"SPORT"},"Sport",-1),we=o("option",{value:"DIGITAL"},"Digital",-1),Te=[ke,Ee,xe,we],Ce={class:"row p-3 mt-2"},$e=o("footer",null,null,-1);function Se(a,e,t,n,s,i){const l=k("Navbar"),h=k("router-view"),$=k("Modal");return _(),m(F,null,[o("header",null,[E(l)]),o("main",null,[E(h),E($,{id:"addEventModal"},{title:C(()=>[ue]),body:C(()=>[o("div",_e,[o("div",me,[o("form",{onSubmit:e[8]||(e[8]=J((...u)=>n.createEvent&&n.createEvent(...u),["prevent"]))},[ve,y(o("input",{required:"","onUpdate:modelValue":e[0]||(e[0]=u=>n.editable.name=u),type:"text",class:"col-12 bg-secondary text-light rounded",minlength:"3",maxlength:"50"},null,512),[[x,n.editable.name]]),ge,y(o("input",{required:"","onUpdate:modelValue":e[1]||(e[1]=u=>n.editable.startDate=u),type:"datetime-local",class:"col-12 bg-secondary text-light rounded"},null,512),[[x,n.editable.startDate]]),he,y(o("input",{required:"","onUpdate:modelValue":e[2]||(e[2]=u=>n.editable.capacity=u),type:"number",class:"col-12 bg-secondary text-light rounded",min:"20",max:"1000"},null,512),[[x,n.editable.capacity]]),pe,y(o("input",{required:"","onUpdate:modelValue":e[3]||(e[3]=u=>n.editable.description=u),type:"text",class:"col-12 bg-secondary text-light rounded",minlength:"10",maxlength:"50"},null,512),[[x,n.editable.description]]),fe,y(o("input",{required:"","onUpdate:modelValue":e[4]||(e[4]=u=>n.editable.location=u),type:"text",class:"col-12 bg-secondary text-light rounded",minlength:"10",maxlength:"50"},null,512),[[x,n.editable.location]]),ye,y(o("input",{required:"","onUpdate:modelValue":e[5]||(e[5]=u=>n.editable.coverImg=u),type:"text",class:"col-12 bg-secondary text-light rounded"},null,512),[[x,n.editable.coverImg]]),be,y(o("select",{required:"","onUpdate:modelValue":e[6]||(e[6]=u=>n.editable.type=u),type:"text",class:"col-12 bg-secondary text-light rounded"},Te,512),[[Q,n.editable.type]]),o("div",Ce,[o("button",{onClick:e[7]||(e[7]=(...u)=>a.createComment&&a.createComment(...u)),class:"col-12 btn btn-success"}," Create! ")])],32)])])]),_:1})]),$e],64)}var Ae=f(de,[["render",Se]]);const Oe={props:{eTicket:{type:Object,required:!0}},setup(){return{}}},Ne=["src","title"];function De(a,e,t,n,s,i){return _(),m("img",{style:{"max-height":"5vh",width:"auto"},class:"hoverable img-fluid rounded-circle",src:t.eTicket.account.picture,alt:"",title:t.eTicket.account.name},null,8,Ne)}var Ie=f(Oe,[["render",De]]),qe=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});class Pe{async getEventComments(e){const t=await d.get("/api/events/"+e+"/comments ");r.log("get event comments",t.data),c.comments=t.data}async createComment(e,t){const n=await d.post("/api/comments",e,t);r.log("post event comment",n.data),c.comments=[...c.comments,n.data]}async deleteComment(e){const t=await d.delete("api/comments/"+e);r.log(t.data,"Comment deleted"),c.comments=[...c.comments,t.data]}}const U=new Pe;class A{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",s="Yes, delete it!"){try{return!!(await q.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:s})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",s=3e3,i=!0){q.fire({title:e,icon:t,position:n,timer:s,timerProgressBar:i,toast:!0,showConfirmButton:!1})}}const Le={props:{comment:{type:Object,required:!0}},setup(a){const e=X();return Z(async()=>{try{await U.getEventComments(e.params.id)}catch(t){r.error(t)}}),{async deleteComment(){try{await A.confirm()&&await U.deleteComment(a.comment.id)}catch(t){r.error(t)}},account:w(()=>c.account)}}},je={class:"row bg-white d-flex justify-content-start align-items-center shadow mt-3 rounded p-3"},Me=["src"],Re={class:"col-10"},Ve={class:"row"},Ue={class:"col-12 mt-3"},He={class:"row d-flex justify-content-end"};function ze(a,e,t,n,s,i){return _(),m("div",je,[o("img",{style:{"max-height":"5vh",width:"auto"},class:"img-fluid col-2 rounded-circle",src:t.comment.creator.picture,alt:""},null,8,Me),o("h6",Re,g(t.comment.creator.name),1),o("div",Ve,[o("p",Ue,g(t.comment.body),1)]),o("div",He,[n.account.id==t.comment.creator.id?(_(),m("i",{key:0,onClick:e[0]||(e[0]=(...l)=>n.deleteComment&&n.deleteComment(...l)),title:"delete comment",class:"col-2 text-end mdi mdi-delete hoverable"})):b("",!0)])])}var Be=f(Le,[["render",ze]]),Ke=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Be});const We={props:{tEvent:{type:Object,required:!0}},setup(a){const e=S();return{goTo(t){e.push({name:t,params:{id:a.tEvent.id}})}}}},Ye=["src"],Ge={class:"col-12 mx-1 text-dark"},Fe={class:"row d-flex justify-content-center"},Je={class:"col-12 p-2 text-center text-black"},Qe={class:"text-start text-black"},Xe={key:0,class:"col-12 bg-danger my-1 text-center text-dark rounded"},Ze=o("a",{class:"text-black"},"Canceled",-1),et=[Ze],tt={key:1,class:"col-12 bg-warning my-1 text-center text-dark rounded"};function nt(a,e,t,n,s,i){return _(),m("button",{onClick:e[0]||(e[0]=l=>n.goTo("Events")),class:"border border-light rounded bg-light"},[o("img",{class:"img-fluid rounded-top",src:t.tEvent.coverImg,alt:""},null,8,Ye),o("div",Ge,[o("span",Fe,[o("h4",Je,g(t.tEvent.name),1)])]),o("div",Qe,[o("ul",null,[o("li",null,g(t.tEvent.location),1),o("li",null,"Starts at "+g(new Date(t.tEvent.startDate).toDateString()),1),o("li",null,g(t.tEvent.capacity)+" remaining tickets",1)])]),t.tEvent.isCanceled==!0?(_(),m("div",Xe,et)):b("",!0),t.tEvent.capacity==0?(_(),m("div",tt," Sold Out ")):b("",!0)])}var ot=f(We,[["render",nt]]),at=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ot});const st="modulepreload",H={},ct="/",O=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${ct}${n}`,n in H)return;H[n]=!0;const s=n.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${i}`))return;const l=document.createElement("link");if(l.rel=s?"stylesheet":st,s||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),s)return new Promise((h,$)=>{l.addEventListener("load",h),l.addEventListener("error",$)})})).then(()=>e())};function rt(a){switch(a){case"./pages/AccountPage.vue":return O(()=>import("./AccountPage.079ae753.js"),["assets/AccountPage.079ae753.js","assets/AccountPage.9cfa627f.css","assets/vendor.7246176c.js"]);case"./pages/EventsPage.vue":return O(()=>import("./EventsPage.0814206e.js"),["assets/EventsPage.0814206e.js","assets/EventsPage.46410c55.css","assets/vendor.7246176c.js"]);case"./pages/HomePage.vue":return O(()=>import("./HomePage.5893ba13.js"),["assets/HomePage.5893ba13.js","assets/HomePage.9582d051.css","assets/vendor.7246176c.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function N(a){return()=>rt(`./pages/${a}.vue`)}const it=[{path:"/",name:"Home",component:N("HomePage")},{path:"/events/:id",name:"Events",component:N("EventsPage"),beforeEnter:P},{path:"/account",name:"Account",component:N("AccountPage"),beforeEnter:P}],z=ee({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:te(),routes:it});class lt{async getAccount(){try{const e=await d.get("/account");r.log("account info",e.data),c.account=e.data}catch(e){r.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const dt=new lt,ut={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class _t{constructor(e=!1,t=V){}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){r.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){r.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(ut.authenticate,e)}onError(e){r.error("[SOCKET_ERROR]",e)}enqueue(e,t){r.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){r.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class mt extends _t{constructor(){super();this.on("error",this.onError)}onError(e){A.toast(e.message,"error")}}const B=new mt,v=ne({domain:se,clientId:ce,audience:re,useRefreshTokens:!0,onRedirectCallback:a=>{z.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});v.on(v.AUTH_EVENTS.AUTHENTICATED,async function(){d.defaults.headers.authorization=v.bearer,d.interceptors.request.use(vt),c.user=v.user,await dt.getAccount(),B.authenticate(v.bearer)});async function vt(a){if(!v.isAuthenticated)return a;const e=v.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await v.loginWithPopup():n&&(await v.getTokenSilently(),d.defaults.headers.authorization=v.bearer,B.authenticate(v.bearer)),a}const gt={setup(){return{user:w(()=>c.user),account:w(()=>c.account),async login(){v.loginWithPopup()},async logout(){v.logout({returnTo:window.location.origin})}}}},D=a=>(L("data-v-e38fc022"),a=a(),j(),a),ht={class:"navbar-text"},pt={key:1,class:"dropdown my-2 my-lg-0"},ft={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},yt={key:0},bt=["src"],kt={class:"mx-3 text-success lighten-30"},Et={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},xt=D(()=>o("div",{class:"list-group-item text-center list-group-item-action hoverable"}," My Events ",-1)),wt=D(()=>o("i",{class:"mdi mdi-logout text-center"},null,-1)),Tt=D(()=>o("a",null,"logout",-1)),Ct=[wt,Tt];function $t(a,e,t,n,s,i){const l=k("router-link");return _(),m("span",ht,[n.user.isAuthenticated?(_(),m("div",pt,[o("div",ft,[n.account.picture?(_(),m("div",yt,[o("img",{title:"Account Navigation",src:n.account.picture,alt:"account photo",height:"40",class:"rounded"},null,8,bt),o("span",kt,g(n.account.name),1)])):b("",!0)]),o("div",Et,[E(l,{to:{name:"Account"}},{default:C(()=>[xt]),_:1}),o("div",{class:"list-group-item text-center list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...h)=>n.logout&&n.logout(...h))},Ct)])])):(_(),m("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...h)=>n.login&&n.login(...h))}," Login "))])}var St=f(gt,[["render",$t],["__scopeId","data-v-e38fc022"]]),At=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:St});const Ot={},Nt={class:"modal",id:"myModal",tabindex:"-1","aria-labelledby":"myModalLabel","aria-hidden":"true"},Dt={class:"modal-dialog"},It={class:"modal-content"},qt={class:"modal-header"},Pt={class:"modal-title",id:"myModalLabel"},Lt=o("button",{type:"button",class:"btn-close bg-light","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),jt={class:"modal-body"};function Mt(a,e,t,n,s,i){return _(),m("div",Nt,[o("div",Dt,[o("div",It,[o("div",qt,[o("h5",Pt,[M(a.$slots,"title")]),Lt]),o("div",jt,[M(a.$slots,"body")])])])])}var Rt=f(Ot,[["render",Mt]]),Vt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Rt});const Ut={setup(){return{account:w(()=>c.account)}}},I=a=>(L("data-v-44812e54"),a=a(),j(),a),Ht={class:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark px-3"},zt={class:"d-flex p-0 flex-column align-items-center"},Bt={title:"Navigate to homepage",class:"text-warning d-flex text-align"},Kt={class:"d-flex p-2 align-items-center justify-content-center"},Wt={key:0,"data-bs-toggle":"modal","data-bs-target":"#addEventModal",title:"start an event",class:"btn btn-warning me-2 text-dark rounded-circle"},Yt=I(()=>o("i",{class:"mdi mdi-power fs-4"},null,-1)),Gt=[Yt],Ft=p(" T O W E R "),Jt=I(()=>o("p",null,null,-1)),Qt=I(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),Xt={class:"collapse d-flex justify-content-end navbar-collapse",id:"navbarText"};function Zt(a,e,t,n,s,i){const l=k("router-link"),h=k("Login");return _(),m("nav",Ht,[E(l,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:C(()=>[o("div",zt,[o("h1",Bt,[o("span",Kt,[n.account.id!==void 0?(_(),m("div",Wt,Gt)):b("",!0)]),Ft,Jt])])]),_:1}),Qt,o("div",Xt,[E(h)])])}var en=f(Ut,[["render",Zt],["__scopeId","data-v-44812e54"]]),tn=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:en});class nn{async getEventTickets(e){const t=await d.get("/api/events/"+e+"/tickets");r.log("Get tickets for this event",t.data),c.eTickets=t.data}async createTicket(e){c.activeEvent.capacity--;const t=await d.post("/api/tickets",e);r.log("creating a ticket",t.data);let n=t.data;c.eTickets.push(n)}async getMyTickets(){const e=await d.get("/account/tickets");r.log("get my tickets",e.data),c.myTickets=e.data}async deleteTicket(e){const t=await d.delete("/api/tickets/"+e);r.log("delete ticket",t.data),c.myTickets=c.myTickets.filter(n=>n.ticketId!==e)}}const on=new nn;const an={props:{myTicket:{type:Object,required:!0}},setup(a){const e=S();return{async deleteTicket(){try{await A.confirm()&&await on.deleteTicket(a.myTicket.ticketId)}catch(t){r.error(t)}},goTo(t){e.push({name:t,params:{id:a.myTicket.event.id}})}}}},sn={class:"border ddd border-light glassy rounded bg-light"},cn={class:"row d-flex justify-content-end"},rn=["src"],ln={class:"col-12 mx-1 text-dark"},dn={class:"row d-flex justify-content-center"},un={class:"col-12 p-2 text-center text-black"},_n={class:"text-start text-black"},mn={class:"text-black"},vn={class:"text-black"},gn={class:"text-black"},hn={key:0,class:"col-12 bg-danger my-1 text-center text-dark rounded"},pn=o("a",{class:"text-black"},"Canceled",-1),fn=[pn],yn={key:1,class:"col-12 bg-warning my-1 text-center text-dark rounded"};function bn(a,e,t,n,s,i){return _(),m("button",sn,[o("div",cn,[o("i",{onClick:e[0]||(e[0]=(...l)=>n.deleteTicket&&n.deleteTicket(...l)),title:"delete ticket",class:"col-2 fs-3 mb-1 mdi mdi-delete hoverable"})]),o("img",{onClick:e[1]||(e[1]=l=>n.goTo("Events")),class:"img-fluid selectable hoverable rounded-top",title:"navigate to event",src:t.myTicket.event.coverImg,alt:""},null,8,rn),o("div",ln,[o("span",dn,[o("h4",un,g(t.myTicket.event.name),1)])]),o("div",_n,[o("ul",null,[o("li",mn,g(t.myTicket.event.location),1),o("li",vn," Starts at "+g(new Date(t.myTicket.event.startDate).toDateString()),1),o("li",gn,g(t.myTicket.event.capacity)+" remaining tickets ",1)])]),t.myTicket.event.isCanceled==!0?(_(),m("div",hn,fn)):b("",!0),t.myTicket.event.capacity==0?(_(),m("div",yn," Sold Out ")):b("",!0)])}var kn=f(an,[["render",bn]]),En=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:kn});function xn(a){Object.entries({"./components/Attendees.vue":qe,"./components/Comment.vue":Ke,"./components/EventCard.vue":at,"./components/Login.vue":At,"./components/Modal.vue":Vt,"./components/Navbar.vue":tn,"./components/TicketCard.vue":En}).forEach(([t,n])=>{const s=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(s,n.default)})}const K=oe(Ae);xn(K);K.use(z).mount("#app");export{c as A,A as P,f as _,U as c,le as e,r as l,on as t};
